{% extends "base.html" %}
{% block title %}POS View{% endblock %}

{% block content %}
<div class="pos-container">
    <!-- Left Column: Tables -->
    <div id="tables-view" class="pos-tables-grid">
        {% for table in tables %}
            <div class="pos-table status-{{ table.status|lower }}" data-table-id="{{ table.id }}" data-table-name="{{ table.name }}">
                <div class="pos-table-name">{{ table.name }}</div>
                <div class="pos-table-status">{{ table.status }}</div>
            </div>
        {% endfor %}
    </div>

    <!-- Right Column: Menu & Cart (Initially hidden) -->
    <div id="order-view" class="pos-order-view d-none">
        <div class="pos-menu-section">
            <div class="pos-order-header">
                <h3>Menu for Table: <span id="table-name-display"></span></h3>
                <button id="back-to-tables" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Back to Tables</button>
            </div>
            <div id="menu-categories" class="pos-menu-items">
                <!-- Menu items will be injected by JavaScript -->
            </div>
        </div>
        <div class="pos-cart-section">
            <h4>Order Summary</h4>
            <div id="cart-items" class="pos-cart-items-list">
                <p class="text-muted">No items added yet.</p>
            </div>
            <div class="pos-cart-total">
                <div class="d-flex justify-content-between"><span>Subtotal:</span> <span id="cart-subtotal">$0.00</span></div>
                <div class="d-flex justify-content-between"><span>Tax (10%):</span> <span id="cart-tax">$0.00</span></div>
                <hr>
                <div class="d-flex justify-content-between fw-bold fs-5"><span>Total:</span> <span id="cart-total">$0.00</span></div>
            </div>
             <div class="mt-3">
                <label for="employee-select" class="form-label">Assign Employee</label>
                <select id="employee-select" class="form-select">
                    <option value="">Select Employee</option>
                    {% for employee in employees %}
                    <option value="{{ employee.id }}">{{ employee.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="d-grid mt-3">
                <button id="place-order-btn" class="btn btn-primary btn-lg" disabled>Place Order</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/pos.js') }}"></script>
{% endblock %}